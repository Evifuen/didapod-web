name: Deploy
on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: 'Login to Azure'
        uses: azure/login@v1
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}

      - name: 'Clean and Deploy'
        run: |
          az container delete --resource-group didapod --name didapod-final-app --yes
          az container create --resource-group didapod --name didapod-final-app --image midictaicontainer.azurecr.io/didapod:latest --dns-name-label didapod-final-2026 --ports 80 --registry-username midictaicontainer --registry-password ${{ secrets.ACR_PASSWORD }} --os-type Linux --cpu 1 --memory 1.5
